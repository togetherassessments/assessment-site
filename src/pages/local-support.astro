---
import Layout from '~/layouts/PageLayout.astro';
import TextPageContent from '~/components/widgets/TextPageContent.astro';
import StructuredData from '~/components/common/StructuredData.astro';
import { generateBreadcrumbs } from '~/utils/breadcrumbs';
import { generateWebPageSchema } from '~/utils/schema-generators';
import { getTextPageSeo } from '~/utils/content';

const seo = await getTextPageSeo('local-support');

const metadata = {
  title: seo.metaTitle || seo.title,
  description: seo.metaDescription,
  ignoreTitleTemplate: !!seo.metaTitle,
};

// Breadcrumb schema
const breadcrumbSchema = generateBreadcrumbs(Astro.url.pathname, Astro.site!, seo.title);

// WebPage schema
const webPageSchema = generateWebPageSchema(Astro.url, seo.title, undefined, undefined, `${Astro.url.href}#breadcrumb`);
---

<Layout metadata={metadata}>
  <!-- Structured Data -->
  <StructuredData schema={webPageSchema} />
  <StructuredData schema={breadcrumbSchema} />

  <TextPageContent slug="local-support" />
</Layout>
