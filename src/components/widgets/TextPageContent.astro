---
import { getCollection, render } from 'astro:content';
import Image from '~/components/common/Image.astro';

interface Props {
  slug: string;
}

const { slug } = Astro.props;

// Fetch the text page content
const textPages = await getCollection('text_pages');
const page = textPages.find((p) => p.data.slug === slug);

if (!page) {
  throw new Error(`Text page not found: ${slug}. Available pages: ${textPages.map((p) => p.data.slug).join(', ')}`);
}

const { title, subheading, image, image_alt } = page.data;
const { Content } = await render(page);
---

<div class="container mx-auto px-4 py-16">
  <!-- Title with font-heading -->
  <h1 class="text-4xl font-bold text-center mb-8 font-heading">{title}</h1>

  <!-- Optional subheading (H3, centered, without font-heading) -->
  {subheading && <h3 class="text-2xl text-center mb-8">{subheading}</h3>}

  <!-- Optional image (centered, constrained height for portrait images) -->
  {
    image && (
      <div class="flex justify-center mb-8 max-h-[50vh]">
        <Image src={image} alt={image_alt || title} layout="contained" />
      </div>
    )
  }

  <!-- Content -->
  <div class="prose prose-lg dark:prose-invert mx-auto max-w-4xl">
    <Content />
  </div>
</div>
